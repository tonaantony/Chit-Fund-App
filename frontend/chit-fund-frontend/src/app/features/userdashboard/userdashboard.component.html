<div class="dashboard-container">
    <!-- Header Section -->
    <header class="dashboard-header">
        <div class="user-info">
          @if (currentUser) {
            <h1>Welcome, {{ currentUser.userName }}!</h1>
            <p class="role-badge">{{ currentUser.userRole }}</p>
          }
        </div>
        <div class="header-actions">
          <button class="refresh-btn" (click)="refreshDashboard()" [disabled]="isLoading">
            <i class="fas fa-sync"></i> Refresh
          </button>
          <button class="view-all-btn" (click)="viewAllGroups()">
            <i class="fas fa-users"></i> All Groups
          </button>
          <button class="transaction-btn" (click)="goToTransactions()">
            <i class="fas fa-wallet"></i> Transaction
          </button>
          <button class="profile-icon" (click)="goToProfile()">
            <i class="fas fa-user-circle"></i>
          </button>
        </div>
      </header>
  
    <!-- Messages Section -->
    @if (error) {
        <div class="alert alert-error">
          {{ error }}
          <button class="close-btn" (click)="error = null">×</button>
        </div>
      }
    
      @if (successMessage) {
        <div class="alert alert-success">
          {{ successMessage }}
          <button class="close-btn" (click)="successMessage = null">×</button>
        </div>
      }
    
      <!-- Loading State -->
      @if (isLoading) {
        <div class="loading-container">
          <div class="spinner"></div>
          <p>Loading your dashboard...</p>
        </div>
      }
  
   <!-- Main Content -->
    <!-- @if (!isLoading) {
      <main class="dashboard-content"> -->
        <!-- Groups Section -->
        <!-- <section class="groups-section">
          <h2>Your Groups</h2>
          
          @if (userGroups.length === 0) {
            <div class="empty-state">
              <p>You haven't joined any groups yet.</p>
              <button class="primary-btn" (click)="viewAllGroups()">
                Browse Available Groups
              </button>
            </div>
          } @else {
            <div class="groups-grid">
              @for (group of userGroups; track group.groupId) {
                <div class="group-card">
                  <div class="group-header">
                    <h3>{{ group.groupName }}</h3>
                    <span class="status-badge" [class]="group.status.toLowerCase()">
                      {{ group.status }}
                    </span>
                  </div>
                  <p class="group-description">{{ group.description }}</p>
                  <div class="group-meta">
                    <span class="member-count">
                      <i class="fas fa-user"></i> {{ group.memberCount }} members
                    </span>
                    <span class="created-date">
                      Created: {{ formatDate(group.createdDate) }}
                    </span>
                  </div>
                  <div class="group-actions">
                    <button 
                      class="details-btn"
                      (click)="viewGroupDetails(group.groupId)">
                      View Details
                    </button>
                    <button 
                      class="leave-btn"
                      (click)="leaveGroup(group.groupId)">
                      Leave Group
                    </button>
                  </div>
                </div>
              }
            </div>
          }
        </section>
      </main>
    }
  </div>  -->
<!-- Main Content -->
@if (!isLoading) {
    <main class="dashboard-content">
      <!-- Groups Section -->
      <section class="groups-section">
        <h2>Your Groups</h2>
        
        @if (userGroups.length === 0) {
          <div class="empty-state">
            <p>You haven't joined any groups yet.</p>
            <button class="primary-btn" (click)="viewAllGroups()">
              Browse Available Groups
            </button>
          </div>
        } @else {
          <div class="groups-grid">
            @for (group of userGroups; track group.groupId) {
              <div class="group-card">
                <div class="group-header">
                  <h3>{{ group.groupName }}</h3>
                  <span class="status-badge" [class]="group.status.toLowerCase()">
                    {{ group.status }}
                  </span>
                </div>
                <p class="group-description">{{ group.description }}</p>
                <div class="group-meta">
                  <span class="member-count">
                    <i class="fas fa-user"></i> {{ group.memberCount }} members
                  </span>
                  <span class="created-date">
                    Created: {{ formatDate(group.createdDate) }}
                  </span>
                </div>
                <div class="group-actions">
                  <button 
                    class="details-btn"
                    (click)="viewGroupDetails(group.groupId)">
                    View Details
                  </button>
                  <button 
                    class="leave-btn"
                    (click)="leaveGroup(group.groupId)">
                    Leave Group
                  </button>
                </div>
              </div>
            }
          </div>
        }
      </section>
    </main>
  }
</div>